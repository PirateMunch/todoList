(()=>{"use strict";class e{constructor(e,t,n,o,i,d,c){return this.title=e,this.description=t,this.startDate=n,this.dueDate=o,this.priority=i,this.index=d,this.list=c,{title:e,description:t,startDate:n,dueDate:o,priority:i,index:d,list:c}}}function t(e){let t=JSON.parse(localStorage.getItem("projects"));t.forEach((n=>{if(n.title===e.title){let e=t.indexOf(n);return e>-1&&t.splice(e,1),t}return t})),t.push(e),localStorage.setItem("projects",JSON.stringify(t))}function n(e,t){e.removeChild(sliderDiv),o(t,e)}function o(e,o){const d=document.createElement("div");d.id=`${e.title+55}`,o.appendChild(d);const c=document.createElement("input");c.type="button",c.id="priorityButton",c.className="priorityButton",c.value="Change priority",d.appendChild(c),c.addEventListener("click",(()=>{!function(e){let o=JSON.parse(localStorage.getItem("projects"));o.forEach((o=>{if(o.title===e.title){let o=document.getElementById(`${e.title+5}`),d=document.getElementById(`${e.title+55}`);const c=document.createElement("div");c.className="sliderDiv",c.id="sliderDiv",p(c);const a=document.createElement("button");a.type="button",a.id="changeButton",a.className="changeButton",a.textContent="update",c.appendChild(a),o.removeChild(d),o.appendChild(c),a.addEventListener("click",(d=>{const c=document.getElementById("priorityRange");e.priority=c.value;const a=d.target.parentNode.parentNode.parentNode.parentNode;i(e,a),t(e),console.log(o),n(o,e)}))}})),localStorage.setItem("projects",JSON.stringify(o))}(e)}));const a=document.createElement("button");a.className="deleteButton",a.dataset.delete="delete",a.id=`${e.index}`,a.innerHTML='<img src="delete1.svg">',d.appendChild(a),a.addEventListener("click",(()=>{!function(e){let t=JSON.parse(localStorage.getItem("projects"));t.forEach((n=>{if(n.title===e.title){let e=t.indexOf(n);e>-1&&t.splice(e,1)}})),localStorage.setItem("projects",JSON.stringify(t))}(e),E(),l()}))}function i(e,t){switch(e.priority){case"1":t.className="lowP";break;case"2":t.className="midP";break;case"3":t.className="highP"}}function d(){let e=this.nextElementSibling;"hiddenDiv"===e.className?e.classList.remove("hiddenDiv"):e.className="hiddenDiv"}function c(e,n,o){e.addEventListener("click",(e=>{let i=e.target.parentNode;n.forEach((e=>{if(console.log(e),console.log(i),e===i.id){let t=n.indexOf(e);t>-1&&n.splice(t,1)}t(o),function(e){const t=document.getElementById(`${e.title+23}`);let n=t.lastElementChild;for(;n;)t.removeChild(n),n=t.lastElementChild;a(e)}(o)}))}))}function a(e){const t=e.list,n=document.getElementById(`${e.title+23}`);t.forEach((o=>{let i=document.createElement("li");const d=document.createElement("button");d.type="button",d.textContent="X",d.className="deleteItem",d.dataset.data="delete",i.textContent=o,i.id=o,n.appendChild(i),i.appendChild(d),c(d,t,e)}))}function l(){let e=localStorage.getItem("projects");JSON.parse(e).forEach((e=>{!function(e){const n=document.getElementById("projectSection"),l=document.createElement("div");l.id=`${e.index}`,l.className="projectDiv",n.appendChild(l);const r=document.createElement("div");r.id=`${e.index}`,r.className="projectHead",l.appendChild(r),r.addEventListener("click",d);const s=document.createElement("div");s.className="projectName",s.textContent=`${e.title}`,r.appendChild(s);const m=document.createElement("div");m.className="startDate",m.innerText=`started\n    ${e.startDate}`,r.appendChild(m);const p=document.createElement("div");p.id=`${e.index+90}`,p.className="hiddenDiv",l.appendChild(p);const u=document.createElement("ul");u.className="projectTitle",u.id="projectTitle",p.appendChild(u);const E=document.createElement("div");E.className="listDescription",E.innerText=`${e.description}`,u.appendChild(E);const h=document.createElement("div");h.id="listDueDate",h.className="listDueDate",h.innerText=`Finish by : ${e.dueDate}`,u.appendChild(h);const g=document.createElement("ul");g.id=`${e.title+23}`,g.className="todoList",g.textContent="To-Do List",g.style.fontSize="1.5rem",g.style.fontWeight="700",u.appendChild(g),a(e),i(e,l);const y=document.createElement("div");y.className="todoDiv",p.appendChild(y);const v=document.createElement("input");v.type="text",v.className="listInput",v.id=`${e.title+10}`,v.placeholder="add to list",y.appendChild(v);const C=document.createElement("button");C.id="todoButton",C.className="todoButton",C.type="button",C.dataset.index=`${e.title}`,C.textContent="add",y.appendChild(C),C.addEventListener("click",(()=>{!function(e){let n=e.list;const o=document.getElementById(`${e.title+10}`),i=document.getElementById(`${e.title+23}`),d=document.createElement("li");d.id=o.value,d.textContent=o.value;const a=document.createElement("button");a.type="button",a.textContent="X",a.className="deleteItem",c(a,n,e),n.push(d.textContent),i.appendChild(d),d.appendChild(a),t(e)}(e),v.value=""}));const f=document.createElement("div");f.className="projectFoot",f.id=`${e.title+5}`,p.appendChild(f),o(e,f)}(e)}))}function r(){const n=document.getElementById("addProjectButton"),o=document.getElementById("projectSection"),i=document.getElementById("title"),d=document.getElementById("description"),c=document.getElementById("dueDateInput"),a=document.getElementById("priorityRange"),r=document.getElementById("listInput1");let m=Math.floor(Math.random()*Date.now()),p=i.value,E=d.value,h=[s((g=new Date).getDate()),s(g.getMonth()+1),g.getFullYear()].join("-");var g;let y=c.value,v=a.value,C=m,f=[];""!==r.value&&f.push(r.value);const N=new e(p,E,h,y,v,C,f);n.textContent="add project",t(N),o.replaceChildren(),l(),u()}function s(e){return e.toString().padStart(2,"0")}function m(){if(null===localStorage.getItem("projects")){let e=[];localStorage.setItem("projects",JSON.stringify(e))}(function(){E();const e=document.getElementById("projectSection"),t=document.createElement("div");t.className="formDiv",e.appendChild(t);const n=document.createElement("form");n.name="form",n.id="form",n.className="form1",t.appendChild(n);const o=document.createElement("div");o.className="titleDiv",n.appendChild(o);const i=document.createElement("input");i.type="text",i.id="title",i.placeholder="Add Project Title",o.appendChild(i);const d=document.createElement("div");d.className="descriptionDiv",n.appendChild(d);const c=document.createElement("input");c.type="text",c.id="description",c.placeholder="Add a short description of your To-Do List project",d.appendChild(c);const a=document.createElement("div");a.className="dueDateDiv",n.appendChild(a);const l=document.createElement("label");l.textContent="Your ideal completion date :",a.appendChild(l);const r=document.createElement("input");r.type="date",r.id="dueDateInput",r.className="dueDateInput",a.appendChild(r);const s=document.createElement("div");s.className="listContainer",n.appendChild(s);const m=document.createElement("input");m.type="text",m.className="listInput1",m.id="listInput1",m.placeholder="Add your first To-Do list item",s.appendChild(m);const u=document.createElement("div");u.className="priorityContainer",u.textContent="Set priority level",n.appendChild(u);const h=document.createElement("div");h.className="priorityDiv",n.appendChild(h),p(h);const g=document.createElement("div");g.className="submitButtonDiv",n.appendChild(g);const y=document.createElement("button");return y.type="button",y.id="formSubmitButton",y.textContent="add project",g.appendChild(y),y})().addEventListener("click",r);const e=document.getElementById("addProjectButton");e.textContent="cancel form",e.addEventListener("click",(()=>{E(),l(),u()}))}function p(e){const t=document.createElement("div");t.className="priorityLabel",e.appendChild(t);const n=document.createElement("span");n.className="priorityLow",n.textContent="low",n.style.color="green",e.appendChild(n);const o=document.createElement("input");o.type="range",o.id="priorityRange",o.className="priorityRange",o.min="1",o.max="3",e.appendChild(o);const i=document.createElement("span");i.className="priorityHigh",i.textContent="high",i.style.color="red",e.appendChild(i)}function u(){const e=document.getElementById("addProjectButton");e.textContent="add project",e.addEventListener("click",m,{once:!0})}function E(){const e=document.getElementById("projectSection");let t=e.lastElementChild;for(;t;)e.removeChild(t),t=e.lastElementChild}function h(){var e=document.getElementById("burgerLinks");"block"===e.style.display?e.style.display="none":e.style.display="block"}document.getElementById("sortBy").addEventListener("click",h),document.getElementById("sortPriority").addEventListener("click",(function(){h();let e=JSON.parse(localStorage.getItem("projects"));e.sort((function(t,n){return 3==e[0].priority?t.priority-n.priority:n.priority-t.priority})),localStorage.setItem("projects",JSON.stringify(e)),E(),l()})),document.getElementById("sortStart").addEventListener("click",(function(){h();let e=JSON.parse(localStorage.getItem("projects"));e.sort((function(t,n){if(e[0].startDate>e[1].startDate)return new Date(t.startDate)-new Date(n.startDate);{let e=new Date(t.startDate);return new Date(n.startDate)-e}})),localStorage.setItem("projects",JSON.stringify(e)),E(),l()})),document.getElementById("sortFinish").addEventListener("click",(function(){h();let e=JSON.parse(localStorage.getItem("projects"));e.sort((function(t,n){if(e[0].dueDate>e[1].dueDate)return new Date(t.dueDate)-new Date(n.dueDate);{let e=new Date(t.dueDate);return new Date(n.dueDate)-e}})),localStorage.setItem("projects",JSON.stringify(e)),E(),l()})),document.getElementById("addProjectButton").addEventListener("click",m,{once:!0}),document.getElementById("burger").addEventListener("click",h),document.getElementById("clearLocal").addEventListener("click",(()=>{localStorage.clear()})),window.onload=function(){if(null===localStorage.getItem("projects")){const e=document.getElementById("projectSection"),t=document.createElement("div");t.className="startPage",t.textContent="No projects or lists found.\nAdd a project to get started!",e.appendChild(t)}else l()}()})();