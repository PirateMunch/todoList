(()=>{"use strict";class e{constructor(e,t,n,o,i,a,c){return this.title=e,this.description=t,this.startDate=n,this.dueDate=o,this.priority=i,this.index=a,this.list=c,{title:e,description:t,startDate:n,dueDate:o,priority:i,index:a,list:c}}}function t(e){let t=JSON.parse(localStorage.getItem("projects"));t.forEach((n=>{if(n.title===e.title){let e=t.indexOf(n);return e>-1&&t.splice(e,1),t}return t})),t.push(e),localStorage.setItem("projects",JSON.stringify(t))}function n(e){const n=document.getElementById("projectSection"),l=document.createElement("div");l.id=`${e.index}`,l.className="projectDiv",n.appendChild(l);const r=document.createElement("div");r.id=`${e.index}`,r.className="projectHead",l.appendChild(r),r.addEventListener("click",a);const s=document.createElement("div");s.className="projectName",s.textContent=`${e.title}`,r.appendChild(s);const m=document.createElement("div");m.className="startDate",m.innerText=`started\n    ${e.startDate}`,r.appendChild(m);const p=document.createElement("div");p.id=`${e.index}`,p.className="hiddenDiv",l.appendChild(p);const u=document.createElement("ul");u.className="projectTitle",u.id="projectTitle",p.appendChild(u);const E=document.createElement("div");E.className="listDescription",E.innerText=`${e.description}`,u.appendChild(E);const g=document.createElement("div");g.id="listDueDate",g.className="listDueDate",g.innerText=`Finish by : ${e.dueDate}`,u.appendChild(g);const h=document.createElement("ul");h.id=`${e.title+23}`,h.className="todoList",h.textContent="To-Do List",h.style.fontSize="1.5rem",h.style.fontWeight="700",u.appendChild(h),c(e),i(e,l);const y=document.createElement("div");y.className="todoDiv",p.appendChild(y);const v=document.createElement("input");v.type="text",v.className="listInput",v.id=`${e.title+10}`,v.placeholder="add to list",y.appendChild(v);const f=document.createElement("button");f.id="todoButton",f.className="todoButton",f.type="button",f.dataset.index=`${e.title}`,f.textContent="add",y.appendChild(f),f.addEventListener("click",(()=>{!function(e){let n=e.list;const o=document.getElementById(`${e.title+10}`),i=document.getElementById(`${e.title+23}`),a=document.createElement("li");a.id=o.value,a.textContent=o.value;const l=document.createElement("button");l.type="button",l.textContent="X",l.className="deleteItem",l.addEventListener("click",(o=>{let i=o.target.parentNode;n.forEach((o=>{if(o===i.id){let e=n.indexOf(o);e>-1&&n.splice(e,1)}t(e)})),d(e),c(e)})),n.push(a.textContent),i.appendChild(a),a.appendChild(l),t(e)}(e),v.value=""})),o(e,p)}function o(e,t){const n=document.createElement("div");n.className="projectFoot",n.id=`${e.title+5}`,t.appendChild(n);const a=document.createElement("input");a.type="button",a.id="priorityButton",a.className="priorityButton",a.value="Change priority",n.appendChild(a),a.addEventListener("click",(()=>{!function(e){let t=JSON.parse(localStorage.getItem("projects"));t.forEach((t=>{if(t.title===e.title){let t=document.getElementById(`${e.title+5}`);t.className="priorDiv";const n=document.createElement("div");n.className="sliderDiv",n.id="sliderDiv",p(n),t.replaceWith(n);const a=document.createElement("button");a.type="button",a.id="changeButton",a.className="changeButton",a.textContent="update",n.appendChild(a),a.addEventListener("click",(t=>{const a=document.getElementById("priorityRange");console.log(a.value),e.priority=a.value,console.log(e.priority);const c=t.target.parentNode.parentNode.parentNode;i(e,c),getSetLocal(e);const d=t.target.parentNode.parentNode,l=o(e,d);n.replaceWith(l)}))}})),localStorage.setItem("projects",JSON.stringify(t))}(e)}));const c=document.createElement("button");c.className="deleteButton",c.dataset.delete="delete",c.id=`${e.index}`,c.innerHTML='<img src="delete1.svg">',n.appendChild(c),c.addEventListener("click",(()=>{!function(e){let t=JSON.parse(localStorage.getItem("projects"));t.forEach((n=>{if(n.title===e.title){let e=t.indexOf(n);e>-1&&t.splice(e,1)}})),localStorage.setItem("projects",JSON.stringify(t))}(e),E(),l()}))}function i(e,t){switch(e.priority){case"1":t.className="lowP";break;case"2":t.className="midP";break;case"3":t.className="highP"}}function a(){let e=this.nextElementSibling;"hiddenDiv"===e.className?e.classList.remove("hiddenDiv"):e.className="hiddenDiv"}function c(e){const n=e.list,o=document.getElementById(`${e.title+23}`);n.forEach((i=>{let a=document.createElement("li");const l=document.createElement("button");l.type="button",l.textContent="X",l.className="deleteItem",l.addEventListener("click",(o=>{let i=o.target.parentNode;n.forEach((o=>{if(o===i.id){let e=n.indexOf(o);e>-1&&n.splice(e,1)}t(e)})),d(e),c(e)})),a.textContent=i,o.appendChild(a),a.appendChild(l)}))}function d(e){const t=document.getElementById(`${e.title+23}`);let n=t.lastElementChild;for(;n;)t.removeChild(n),n=t.lastElementChild}function l(){let e=localStorage.getItem("projects");JSON.parse(e).forEach((e=>{n(e)}))}function r(){const n=document.getElementById("addProjectButton"),o=document.getElementById("projectSection"),i=document.getElementById("title"),a=document.getElementById("description"),c=document.getElementById("dueDateInput"),d=document.getElementById("priorityRange"),r=document.getElementById("listInput1");let m=Math.floor(Math.random()*Date.now()),p=i.value,E=a.value,g=[s((h=new Date).getDate()),s(h.getMonth()+1),h.getFullYear()].join("-");var h;let y=c.value,v=d.value,f=m,C=[];""!==r.value&&C.push(r.value);const N=new e(p,E,g,y,v,f,C);n.textContent="add project",t(N),o.replaceChildren(),l(),u()}function s(e){return e.toString().padStart(2,"0")}function m(){if(null===localStorage.getItem("projects")){let e=[];localStorage.setItem("projects",JSON.stringify(e))}(function(){E();const e=document.getElementById("projectSection"),t=document.createElement("div");t.className="formDiv",e.appendChild(t);const n=document.createElement("form");n.name="form",n.id="form",n.className="form1",t.appendChild(n);const o=document.createElement("div");o.className="titleDiv",n.appendChild(o);const i=document.createElement("input");i.type="text",i.id="title",i.placeholder="Add Project Title",o.appendChild(i);const a=document.createElement("div");a.className="descriptionDiv",n.appendChild(a);const c=document.createElement("input");c.type="text",c.id="description",c.placeholder="Add a short description of your To-Do List project",a.appendChild(c);const d=document.createElement("div");d.className="dueDateDiv",n.appendChild(d);const l=document.createElement("label");l.textContent="Your ideal completion date :",d.appendChild(l);const r=document.createElement("input");r.type="date",r.id="dueDateInput",r.className="dueDateInput",d.appendChild(r);const s=document.createElement("div");s.className="listContainer",n.appendChild(s);const m=document.createElement("input");m.type="text",m.className="listInput1",m.id="listInput1",m.placeholder="Add your first To-Do list item",s.appendChild(m);const u=document.createElement("div");u.className="priorityContainer",u.textContent="Set priority level",n.appendChild(u);const g=document.createElement("div");g.className="priorityDiv",n.appendChild(g),p(g);const h=document.createElement("div");h.className="submitButtonDiv",n.appendChild(h);const y=document.createElement("button");return y.type="button",y.id="formSubmitButton",y.textContent="add project",h.appendChild(y),y})().addEventListener("click",r);const e=document.getElementById("addProjectButton");e.textContent="cancel form",e.addEventListener("click",(()=>{E(),l(),u()}))}function p(e){const t=document.createElement("div");t.className="priorityLabel",e.appendChild(t);const n=document.createElement("span");n.className="priorityLow",n.textContent="low",n.style.color="green",e.appendChild(n);const o=document.createElement("input");o.type="range",o.id="priorityRange",o.className="priorityRange",o.min="1",o.max="3",e.appendChild(o);const i=document.createElement("span");i.className="priorityHigh",i.textContent="high",i.style.color="red",e.appendChild(i)}function u(){const e=document.getElementById("addProjectButton");e.textContent="add project",e.addEventListener("click",m,{once:!0})}function E(){const e=document.getElementById("projectSection");let t=e.lastElementChild;for(;t;)e.removeChild(t),t=e.lastElementChild}function g(){var e=document.getElementById("burgerLinks");"block"===e.style.display?e.style.display="none":e.style.display="block"}document.getElementById("sortBy").addEventListener("click",g),document.getElementById("sortPriority").addEventListener("click",(function(){g();let e=JSON.parse(localStorage.getItem("projects"));e.sort((function(t,n){return 3==e[0].priority?t.priority-n.priority:n.priority-t.priority})),localStorage.setItem("projects",JSON.stringify(e)),E(),l()})),document.getElementById("sortStart").addEventListener("click",(function(){g();let e=JSON.parse(localStorage.getItem("projects"));e.sort((function(t,n){if(e[0].startDate>e[1].startDate)return new Date(t.startDate)-new Date(n.startDate);{let e=new Date(t.startDate);return new Date(n.startDate)-e}})),localStorage.setItem("projects",JSON.stringify(e)),E(),l()})),document.getElementById("sortFinish").addEventListener("click",(function(){g();let e=JSON.parse(localStorage.getItem("projects"));e.sort((function(t,n){if(e[0].dueDate>e[1].dueDate)return new Date(t.dueDate)-new Date(n.dueDate);{let e=new Date(t.dueDate);return new Date(n.dueDate)-e}})),localStorage.setItem("projects",JSON.stringify(e)),E(),l()})),document.getElementById("addProjectButton").addEventListener("click",m,{once:!0}),document.getElementById("burger").addEventListener("click",g),document.getElementById("clearLocal").addEventListener("click",(()=>{localStorage.clear()})),window.onload=function(){if(null===localStorage.getItem("projects")){const e=document.getElementById("projectSection"),t=document.createElement("div");t.className="startPage",t.textContent="No projects or lists found.\nAdd a project to get started!",e.appendChild(t)}else l()}()})();