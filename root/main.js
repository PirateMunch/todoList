(()=>{"use strict";class e{constructor(e,t,n,o,a,c,i){return this.title=e,this.description=t,this.startDate=n,this.dueDate=o,this.priority=a,this.index=c,this.list=i,{title:e,description:t,startDate:n,dueDate:o,priority:a,index:c,list:i}}}function t(e){let t=JSON.parse(localStorage.getItem("projects"));t.forEach((n=>{if(n.title===e.title){let e=t.indexOf(n);return e>-1&&t.splice(e,1),t}return t})),t.push(e),localStorage.setItem("projects",JSON.stringify(t))}function n(e){const n=document.getElementById("projectSection"),i=document.createElement("div");i.id=`${e.index}`,i.className="projectDiv",n.appendChild(i);const d=document.createElement("div");d.id=`${e.index}`,d.className="projectHead",i.appendChild(d),d.addEventListener("click",c);const l=document.createElement("div");l.className="projectName",l.textContent=`${e.title}`,d.appendChild(l);const r=document.createElement("div");r.className="startDate",r.innerText=`started\n    ${e.startDate}`,d.appendChild(r);const s=document.createElement("div");s.id=`${e.index}`,s.className="hiddenDiv",i.appendChild(s);const m=document.createElement("ul");m.className="projectTitle",m.id="projectTitle",s.appendChild(m);const p=document.createElement("div");p.className="listDescription",p.innerText=`${e.description}`,m.appendChild(p);const u=document.createElement("div");u.id="listDueDate",u.className="listDueDate",u.innerText=`Finish by : ${e.dueDate}`,m.appendChild(u);const E=document.createElement("ul");E.id=`${e.title+23}`,E.className="todoList",E.textContent="To-Do List",E.style.fontSize="1.5rem",E.style.fontWeight="700",m.appendChild(E),function(e){const t=e.list,n=document.getElementById(`${e.title+23}`);t.forEach((e=>{let t=document.createElement("li");const o=document.createElement("button");o.type="button",o.textContent="X",o.className="deleteItem",t.textContent=e,n.appendChild(t),t.appendChild(o)}))}(e),a(e,i);const g=document.createElement("div");g.className="todoDiv",s.appendChild(g);const h=document.createElement("input");h.type="text",h.className="listInput",h.id=`${e.title+10}`,h.placeholder="add to list",g.appendChild(h);const y=document.createElement("button");y.id="todoButton",y.className="todoButton",y.type="button",y.dataset.index=`${e.title}`,y.textContent="add",g.appendChild(y),y.addEventListener("click",(()=>{!function(e){let n=e.list;const o=document.getElementById(`${e.title+10}`),a=document.getElementById(`${e.title+23}`),c=document.createElement("li");c.id=o.value,c.textContent=o.value;const i=document.createElement("button");i.type="button",i.textContent="X",i.className="deleteItem",i.addEventListener("click",(o=>{let a=o.target;n.forEach((o=>{if(console.log(o),o===a.textContent){let a=n.indexOf(o);a>-1&&(n.splice(a,1),t(e)),console.log("works?")}a.parentNode.parentNode.removeChild(a.parentNode)}))})),n.push(c.textContent),a.appendChild(c),c.appendChild(i),t(e)}(e),h.value=""})),o(e,s)}function o(e,t){const n=document.createElement("div");n.className="projectFoot",n.id=`${e.title+5}`,t.appendChild(n);const c=document.createElement("input");c.type="button",c.id="priorityButton",c.className="priorityButton",c.value="Change priority",n.appendChild(c),c.addEventListener("click",(()=>{!function(e){let t=JSON.parse(localStorage.getItem("projects"));t.forEach((t=>{if(t.title===e.title){let t=document.getElementById(`${e.title+5}`);t.className="priorDiv";const n=document.createElement("div");n.className="sliderDiv",n.id="sliderDiv",s(n),t.replaceWith(n);const c=document.createElement("button");c.type="button",c.id="changeButton",c.className="changeButton",c.textContent="update",n.appendChild(c),c.addEventListener("click",(t=>{const c=document.getElementById("priorityRange");console.log(c.value),e.priority=c.value,console.log(e.priority);const i=t.target.parentNode.parentNode.parentNode;a(e,i),getSetLocal(e);const d=t.target.parentNode.parentNode,l=o(e,d);n.replaceWith(l)}))}})),localStorage.setItem("projects",JSON.stringify(t))}(e)}));const d=document.createElement("button");d.className="deleteButton",d.dataset.delete="delete",d.id=`${e.index}`,d.innerHTML='<img src="delete1.svg">',n.appendChild(d),d.addEventListener("click",(()=>{!function(e){let t=JSON.parse(localStorage.getItem("projects"));t.forEach((n=>{if(n.title===e.title){let e=t.indexOf(n);e>-1&&t.splice(e,1)}})),localStorage.setItem("projects",JSON.stringify(t))}(e),p(),i()}))}function a(e,t){switch(e.priority){case"1":t.className="lowP";break;case"2":t.className="midP";break;case"3":t.className="highP"}}function c(){let e=this.nextElementSibling;"hiddenDiv"===e.className?e.classList.remove("hiddenDiv"):e.className="hiddenDiv"}function i(){let e=localStorage.getItem("projects");JSON.parse(e).forEach((e=>{n(e)}))}function d(){const n=document.getElementById("addProjectButton"),o=document.getElementById("projectSection"),a=document.getElementById("title"),c=document.getElementById("description"),d=document.getElementById("dueDateInput"),r=document.getElementById("priorityRange"),s=document.getElementById("listInput1");let p=Math.floor(Math.random()*Date.now()),u=a.value,E=c.value,g=[l((h=new Date).getDate()),l(h.getMonth()+1),h.getFullYear()].join("-");var h;let y=d.value,v=r.value,C=p,N=[];""!==s.value&&N.push(s.value);const f=new e(u,E,g,y,v,C,N);n.textContent="add project",t(f),o.replaceChildren(),i(),m()}function l(e){return e.toString().padStart(2,"0")}function r(){if(null===localStorage.getItem("projects")){let e=[];localStorage.setItem("projects",JSON.stringify(e))}(function(){p();const e=document.getElementById("projectSection"),t=document.createElement("div");t.className="formDiv",e.appendChild(t);const n=document.createElement("form");n.name="form",n.id="form",n.className="form1",t.appendChild(n);const o=document.createElement("div");o.className="titleDiv",n.appendChild(o);const a=document.createElement("input");a.type="text",a.id="title",a.placeholder="Add Project Title",o.appendChild(a);const c=document.createElement("div");c.className="descriptionDiv",n.appendChild(c);const i=document.createElement("input");i.type="text",i.id="description",i.placeholder="Add a short description of your To-Do List project",c.appendChild(i);const d=document.createElement("div");d.className="dueDateDiv",n.appendChild(d);const l=document.createElement("label");l.textContent="Your ideal completion date :",d.appendChild(l);const r=document.createElement("input");r.type="date",r.id="dueDateInput",r.className="dueDateInput",d.appendChild(r);const m=document.createElement("div");m.className="listContainer",n.appendChild(m);const u=document.createElement("input");u.type="text",u.className="listInput1",u.id="listInput1",u.placeholder="Add your first To-Do list item",m.appendChild(u);const E=document.createElement("div");E.className="priorityContainer",E.textContent="Set priority level",n.appendChild(E);const g=document.createElement("div");g.className="priorityDiv",n.appendChild(g),s(g);const h=document.createElement("div");h.className="submitButtonDiv",n.appendChild(h);const y=document.createElement("button");return y.type="button",y.id="formSubmitButton",y.textContent="add project",h.appendChild(y),y})().addEventListener("click",d);const e=document.getElementById("addProjectButton");e.textContent="cancel form",e.addEventListener("click",(()=>{p(),i(),m()}))}function s(e){const t=document.createElement("div");t.className="priorityLabel",e.appendChild(t);const n=document.createElement("span");n.className="priorityLow",n.textContent="low",n.style.color="green",e.appendChild(n);const o=document.createElement("input");o.type="range",o.id="priorityRange",o.className="priorityRange",o.min="1",o.max="3",e.appendChild(o);const a=document.createElement("span");a.className="priorityHigh",a.textContent="high",a.style.color="red",e.appendChild(a)}function m(){const e=document.getElementById("addProjectButton");e.textContent="add project",e.addEventListener("click",r,{once:!0})}function p(){const e=document.getElementById("projectSection");let t=e.lastElementChild;for(;t;)e.removeChild(t),t=e.lastElementChild}function u(){var e=document.getElementById("burgerLinks");"block"===e.style.display?e.style.display="none":e.style.display="block"}document.getElementById("sortBy").addEventListener("click",u),document.getElementById("sortPriority").addEventListener("click",(function(){u();let e=JSON.parse(localStorage.getItem("projects"));e.sort((function(t,n){return 3==e[0].priority?t.priority-n.priority:n.priority-t.priority})),localStorage.setItem("projects",JSON.stringify(e)),p(),i()})),document.getElementById("sortStart").addEventListener("click",(function(){u();let e=JSON.parse(localStorage.getItem("projects"));e.sort((function(t,n){if(e[0].startDate>e[1].startDate)return new Date(t.startDate)-new Date(n.startDate);{let e=new Date(t.startDate);return new Date(n.startDate)-e}})),localStorage.setItem("projects",JSON.stringify(e)),p(),i()})),document.getElementById("sortFinish").addEventListener("click",(function(){u();let e=JSON.parse(localStorage.getItem("projects"));e.sort((function(t,n){if(e[0].dueDate>e[1].dueDate)return new Date(t.dueDate)-new Date(n.dueDate);{let e=new Date(t.dueDate);return new Date(n.dueDate)-e}})),localStorage.setItem("projects",JSON.stringify(e)),p(),i()})),document.getElementById("addProjectButton").addEventListener("click",r,{once:!0}),document.getElementById("burger").addEventListener("click",u),document.getElementById("clearLocal").addEventListener("click",(()=>{localStorage.clear()})),window.onload=function(){if(null===localStorage.getItem("projects")){const e=document.getElementById("projectSection"),t=document.createElement("div");t.className="startPage",t.textContent="No projects or lists found.\nAdd a project to get started!",e.appendChild(t)}else i()}()})();