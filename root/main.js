(()=>{"use strict";class e{constructor(e,t,n,o,i,d,a){return this.title=e,this.description=t,this.startDate=n,this.dueDate=o,this.priority=i,this.index=d,this.list=a,{title:e,description:t,startDate:n,dueDate:o,priority:i,index:d,list:a}}}function t(e){let t=JSON.parse(localStorage.getItem("projects"));t.forEach((n=>{if(n.title===e.title){let e=t.indexOf(n);e>-1&&t.splice(e,1)}})),t.push(e),localStorage.setItem("projects",JSON.stringify(t))}function n(e,t){e.removeChild(sliderDiv),o(t,e)}function o(e,o){const d=document.createElement("div");d.id=`${e.title+55}`,d.className="footDiv",o.appendChild(d);const a=document.createElement("input");a.type="button",a.id="priorityButton",a.className="priorityButton",a.value="Change priority",d.appendChild(a),a.addEventListener("click",(()=>{!function(e){let o=JSON.parse(localStorage.getItem("projects"));o.forEach((o=>{if(o.title===e.title){let o=document.getElementById(`${e.title+5}`),d=document.getElementById(`${e.title+55}`);const a=document.createElement("div");a.className="sliderDiv",a.id="sliderDiv",p(a);const c=document.createElement("button");c.type="button",c.id="changeButton",c.className="changeButton",c.textContent="update",a.appendChild(c),o.removeChild(d),o.appendChild(a),c.addEventListener("click",(d=>{const a=document.getElementById("priorityRange");e.priority=a.value;const c=d.target.parentNode.parentNode.parentNode.parentNode;i(e,c),t(e),n(o,e)}))}})),localStorage.setItem("projects",JSON.stringify(o))}(e)}));const c=document.createElement("button");c.className="deleteButton",c.dataset.delete="delete",c.id=`${e.index}`,c.innerHTML='<img src="delete1.svg">',d.appendChild(c),c.addEventListener("click",(()=>{!function(e){let t=JSON.parse(localStorage.getItem("projects"));t.forEach((n=>{if(n.title===e.title){let e=t.indexOf(n);e>-1&&t.splice(e,1)}})),localStorage.setItem("projects",JSON.stringify(t))}(e),E(),l()}))}function i(e,t){switch(e.priority){case"1":t.className="lowP";break;case"2":t.className="midP";break;case"3":t.className="highP"}}function d(){let e=this.nextElementSibling;"hiddenDiv"===e.className?e.classList.remove("hiddenDiv"):e.className="hiddenDiv"}function a(e,n,o){e.addEventListener("click",(e=>{let i=e.target.parentNode;n.forEach((e=>{if(e===i.id){let t=n.indexOf(e);t>-1&&n.splice(t,1)}t(o),function(e){const t=document.getElementById(`${e.title+23}`);let n=t.lastElementChild;for(;n;)t.removeChild(n),n=t.lastElementChild;c(e)}(o)}))}))}function c(e){const t=e.list,n=document.getElementById(`${e.title+23}`);t.forEach((o=>{let i=document.createElement("li");const d=document.createElement("button");d.type="button",d.textContent="X",d.className="deleteItem",d.dataset.data="delete",i.textContent=o,i.id=o,n.appendChild(i),i.appendChild(d),a(d,t,e)}))}function l(){let e=localStorage.getItem("projects");JSON.parse(e).forEach((e=>{!function(e){const n=document.getElementById("projectSection"),l=document.createElement("div");l.id=`${e.index}`,l.className="projectDiv",n.appendChild(l);const s=document.createElement("div");s.id=`${e.index}`,s.className="projectHead",l.appendChild(s),s.addEventListener("click",d);const r=document.createElement("div");r.className="projectName",r.textContent=`${e.title}`,s.appendChild(r);const m=document.createElement("div");m.className="startDate",m.innerText=`started\n    ${e.startDate}`,s.appendChild(m);const p=document.createElement("div");p.id=`${e.index+90}`,p.className="hiddenDiv",l.appendChild(p);const u=document.createElement("ul");u.className="projectTitle",u.id="projectTitle",p.appendChild(u);const E=document.createElement("div");E.className="listDescription",E.innerText=`${e.description}`,u.appendChild(E);const h=document.createElement("div");h.id="listDueDate",h.className="listDueDate",h.innerText=`Finish by : ${e.dueDate}`,u.appendChild(h);const g=document.createElement("ul");g.id=`${e.title+23}`,g.className="todoList",g.textContent="To-Do List",g.style.fontSize="1.5rem",g.style.fontWeight="700",u.appendChild(g),c(e),i(e,l);const y=document.createElement("div");y.className="todoDiv",p.appendChild(y);const C=document.createElement("input");C.type="text",C.className="listInput",C.id=`${e.title+10}`,C.placeholder="add to list",y.appendChild(C);const v=document.createElement("button");v.id="todoButton",v.className="todoButton",v.type="button",v.dataset.index=`${e.title}`,v.textContent="add",y.appendChild(v),v.addEventListener("click",(()=>{!function(e){let n=e.list;const o=document.getElementById(`${e.title+10}`),i=document.getElementById(`${e.title+23}`),d=document.createElement("li");d.id=o.value,d.textContent=o.value;const c=document.createElement("button");c.type="button",c.textContent="X",c.className="deleteItem",a(c,n,e),n.push(d.textContent),i.appendChild(d),d.appendChild(c),t(e)}(e),C.value=""}));const f=document.createElement("div");f.className="projectFoot",f.id=`${e.title+5}`,p.appendChild(f),o(e,f)}(e)}))}function s(){const n=document.getElementById("addProjectButton"),o=document.getElementById("projectSection"),i=document.getElementById("title"),d=document.getElementById("description"),a=document.getElementById("dueDateInput"),c=document.getElementById("priorityRange"),s=document.getElementById("listInput1");let m=Math.floor(Math.random()*Date.now()),p=i.value,E=d.value,h=[r((g=new Date).getDate()),r(g.getMonth()+1),g.getFullYear()].join("-");var g;let y=a.value,C=c.value,v=m,f=[];""!==s.value&&f.push(s.value);const N=new e(p,E,h,y,C,v,f);n.textContent="add project",t(N),o.replaceChildren(),l(),u()}function r(e){return e.toString().padStart(2,"0")}function m(){if(null===localStorage.getItem("projects")){let e=[];localStorage.setItem("projects",JSON.stringify(e))}(function(){E();const e=document.getElementById("projectSection"),t=document.createElement("div");t.className="formDiv",e.appendChild(t);const n=document.createElement("form");n.name="form",n.id="form",n.className="form1",t.appendChild(n);const o=document.createElement("div");o.className="titleDiv",n.appendChild(o);const i=document.createElement("input");i.type="text",i.id="title",i.placeholder="Add Project Title",o.appendChild(i);const d=document.createElement("div");d.className="descriptionDiv",n.appendChild(d);const a=document.createElement("input");a.type="text",a.id="description",a.placeholder="Add a short description of your To-Do List project",d.appendChild(a);const c=document.createElement("div");c.className="dueDateDiv",n.appendChild(c);const l=document.createElement("label");l.textContent="Your ideal completion date :",c.appendChild(l);const s=document.createElement("input");s.type="date",s.id="dueDateInput",s.className="dueDateInput",c.appendChild(s);const r=document.createElement("div");r.className="listContainer",n.appendChild(r);const m=document.createElement("input");m.type="text",m.className="listInput1",m.id="listInput1",m.placeholder="Add your first To-Do list item",r.appendChild(m);const u=document.createElement("div");u.className="priorityContainer",u.textContent="Set priority level",n.appendChild(u);const h=document.createElement("div");h.className="priorityDiv",n.appendChild(h),p(h);const g=document.createElement("div");g.className="submitButtonDiv",n.appendChild(g);const y=document.createElement("button");return y.type="button",y.id="formSubmitButton",y.textContent="add project",g.appendChild(y),y})().addEventListener("click",s);const e=document.getElementById("addProjectButton");e.textContent="cancel form",e.addEventListener("click",(()=>{E(),l(),u()}))}function p(e){const t=document.createElement("div");t.className="priorityLabel",e.appendChild(t);const n=document.createElement("span");n.className="priorityLow",n.textContent="low",n.style.color="green",e.appendChild(n);const o=document.createElement("input");o.type="range",o.id="priorityRange",o.className="priorityRange",o.min="1",o.max="3",e.appendChild(o);const i=document.createElement("span");i.className="priorityHigh",i.textContent="high",i.style.color="red",e.appendChild(i)}function u(){const e=document.getElementById("addProjectButton");e.textContent="add project",e.addEventListener("click",m,{once:!0})}function E(){const e=document.getElementById("projectSection");let t=e.lastElementChild;for(;t;)e.removeChild(t),t=e.lastElementChild}function h(){var e=document.getElementById("burgerLinks");"block"===e.style.display?e.style.display="none":e.style.display="block"}function g(){if(null===localStorage.getItem("projects")){const e=document.getElementById("projectSection"),t=document.createElement("div");t.className="startPage",t.textContent="No projects or lists found.\nAdd a project to get started!",e.appendChild(t)}else l()}document.getElementById("sortBy").addEventListener("click",h),document.getElementById("sortPriority").addEventListener("click",(function(){h();let e=JSON.parse(localStorage.getItem("projects"));e.sort((function(t,n){return 3==e[0].priority?t.priority-n.priority:n.priority-t.priority})),localStorage.setItem("projects",JSON.stringify(e)),E(),l()})),document.getElementById("sortStart").addEventListener("click",(function(){h();let e=JSON.parse(localStorage.getItem("projects"));e.sort((function(t,n){if(e[0].startDate>e[1].startDate)return new Date(t.startDate)-new Date(n.startDate);{let e=new Date(t.startDate);return new Date(n.startDate)-e}})),localStorage.setItem("projects",JSON.stringify(e)),E(),l()})),document.getElementById("sortFinish").addEventListener("click",(function(){h();let e=JSON.parse(localStorage.getItem("projects"));e.sort((function(t,n){if(e[0].dueDate>e[1].dueDate)return new Date(t.dueDate)-new Date(n.dueDate);{let e=new Date(t.dueDate);return new Date(n.dueDate)-e}})),localStorage.setItem("projects",JSON.stringify(e)),E(),l()})),function(){let e=[];document.querySelector("[data-search]").addEventListener("input",(t=>{const n=t.target.value.toLowerCase();!function(){let t=JSON.parse(localStorage.getItem("projects"));e=t.map((e=>{let t=document.getElementById(`${e.index}`),n=e.list.join();return{element:t,title:e.title,description:e.description,list:n}}))}(),e.forEach((e=>{const t=e.title.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.list.toLowerCase().includes(n);e.element.classList.toggle("hideSearch",!t)}))}))}(),document.getElementById("addProjectButton").addEventListener("click",m,{once:!0}),document.getElementById("burger").addEventListener("click",h),document.getElementById("clearLocal").addEventListener("click",(()=>{localStorage.clear(),E(),g()})),window.onload=g()})();